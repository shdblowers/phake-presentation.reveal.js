<html>
<head>
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/blood.css" id="theme">

    <!-- Code syntax highlighting -->
    <link class="codestyle" rel="stylesheet" href="lib/css/zenburn.css">
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section>
            <h1>Phake it 'til you make it</h1>
            <p>
                A Presentation On The Phake Mocking Framework And Why You
                Should Use It
            </p>
            <br/>
            <h3>By Steven Blowers</h3>
        </section>
        <section>
            <h2>What This Presentation Is About<h2>
        </section>
        <section>
            <h2>Some Questions To Start Off</h2>
            <h3>Hands up please...</h3>
            <br/>
            <ul>
                <li>Who uses Phake?</li>
                <li>Who uses the PHPUnit Mock Objects?</li>
                <li>Who is not familiar with mocking code?</li>
            </ul>
        </section>
        <section>
            <h2>Getting Phake</h2>
            <p>Add this to you <code>composer.json</code></p>
            <pre><code class="php">
{
    "require-dev": {
        "phake/phake": "@stable"
    }
}
            </code></pre>
            <p>Or run this in your project's directory with composer installed</p>
            <pre><code>composer require phake/phake:@stable --dev</code></pre>
        </section>
        <section>
            <h2>Creating Mocks</h2>
            <p>Phake</p>
            <pre><code class="php">
$mock = Phake::mock(Company\Feature\Class::class);
            </code></pre>
            <p>PHPUnit</p>
            <pre><code class="php">
$mock = $this->getMockBuilder(Company\Feature\Class::class)->getMock();
            </code></pre>
        </section>
        <section>
            <h2>Method Stubbing</h2>
            <p>Phake</p>
            <pre><code class="php">
Phake::when($mock)->method(121, 'abc')->thenReturn('xyz');
            </code></pre>
            <p>PHPUnit</p>
            <pre><code class="php">
$mock->expects($this->any())
     ->method('method')
     ->with(121, 'abc')
     ->willReturn('xyz');
            </code></pre>
        </section>
        <section>
            <h2>Stubbing Multiple Calls</h2>
            <p>Phake</p>
            <pre><code class="php">
Phake::when($calculator)->add(1, 3)->thenReturn(4);
Phake::when($calculator)->add(12, 8)->thenReturn(20);
Phake::when($calculator)->add(29, 4)->thenReturn(34);
            </code></pre>
            <p>PHPUnit</p>
            <pre><code class="php">
$calculator->method('add')
           ->(this->returnValueMap([
                [1, 3, 4],
                [12, 8, 20],
                [29, 4, 34]
           ]));
            </code></pre>
        </section>
    </div>
</div>
<script src="js/reveal.js"></script>
<script src="lib/js/head.min.js"></script>
<script>
    Reveal.initialize({
        dependencies: [{
            src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            }
        }]
    });
    Reveal.configure({slideNumber: true});
    Reveal.configure({slideNumber: 'c/t'});
</script>
</body>
</html>
